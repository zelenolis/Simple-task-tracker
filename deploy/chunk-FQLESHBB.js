import{a as U,b as G}from"./chunk-HVGR5URK.js";import{b as R,c as C,f as z}from"./chunk-VS6VRPCV.js";import{j as N,q as $,r as q}from"./chunk-L5RHBUOY.js";import{p as K}from"./chunk-T57MLRIA.js";import{e as V,f as B,g as D,h as F,l as j,n as A}from"./chunk-UQTN7MN5.js";import{Bb as k,Cb as o,Db as b,Eb as d,Gb as M,Hb as O,I as y,Ia as l,Ib as P,Kb as T,ca as w,cb as x,eb as h,ga as g,ha as f,kb as i,lb as t,mb as v,nb as E,ob as I,pb as S,rb as u,tb as p,va as _}from"./chunk-4KIBKXAV.js";function J(a,r){if(a&1){let n=S();E(0),i(1,"p"),o(2),t(),i(3,"p",6),o(4,"Executor(s): "),v(5,"br"),o(6),t(),i(7,"div",9)(8,"button",10),u("click",function(){g(n);let e=p(2);return f(e.onChange())}),o(9,"change"),t(),i(10,"button",10),u("click",function(){g(n);let e=p(2);return f(e.onDelete())}),o(11,"delete"),t()(),I()}if(a&2){let n=p().ngIf;l(2),d("Status: ",n.status,""),l(4),d(" ",n.executor,"")}}function L(a,r){if(a&1&&(i(0,"option",19),o(1),t()),a&2){let n=r.$implicit;h("value",n),l(),b(n)}}function Q(a,r){if(a&1){let n=S();i(0,"div",11)(1,"label",12),o(2,"Executor(s): "),t(),v(3,"input",13,14),t(),i(5,"div",11)(6,"label",15),o(7,"Status: "),t(),i(8,"select",16,17),x(10,L,2,2,"option",18),t()(),i(11,"div",9)(12,"button",10),u("click",function(){g(n);let e=k(4),c=k(9),m=p().ngIf,H=p();return f(H.onChangeConfirm(e.value,c.value,m))}),o(13,"confirm"),t(),i(14,"button",10),u("click",function(){g(n);let e=p(2);return f(e.onCancel())}),o(15,"cancel"),t()()}if(a&2){let n=p(2);l(10),h("ngForOf",n.statusOptions)}}function W(a,r){if(a&1&&(i(0,"div",5)(1,"h4",6),o(2),t(),i(3,"p",6),o(4,"Name: "),v(5,"br"),o(6),t(),i(7,"p"),o(8),t(),i(9,"p"),o(10),t(),x(11,J,12,2,"ng-container",7)(12,Q,16,1,"ng-template",null,8,T),t()),a&2){let n=r.ngIf,s=k(13),e=p();l(2),d("Title: ",n.title,""),l(4),d(" ",n.name,""),l(2),d("Deadline: ",n.deadline,""),l(2),d("Priority: ",n.priority,""),l(),h("ngIf",e.changeOpen)("ngIfElse",s)}}function X(a,r){a&1&&(i(0,"p"),o(1,"Task not found"),t())}var ge=(()=>{let r=class r{constructor(){this.taskId=_(j),this.store=_(N),this.router=_(A),this.taskManagementService=_(z),this.matSnackBar=_(K),this.taskSheet$=this.store.select(R(this.taskId.snapshot.paramMap.get("id"))),this.statusOptions=[C.new,C.inProgress,C.completed],this.changeOpen=!0}onBack(){this.router.navigate([""])}onChange(){this.changeOpen=!1}onCancel(){this.changeOpen=!0}onChangeConfirm(s,e,c){let m={id:c.id,title:c.title,name:c.name,deadline:c.deadline,priority:c.priority,status:e,executor:s};this.store.dispatch(q({taskId:c.id,updTask:m})),this.taskManagementService.sendUpdateToServer(c.id,m),this.matSnackBar.open("Task changed","OK",{duration:2e3}),this.changeOpen=!0}onDelete(){let s=this.matSnackBar.open("Confirm : ","Delete",{duration:5e3});s.onAction().pipe(y(1)).subscribe(()=>{let e=this.taskId.snapshot.paramMap.get("id");this.store.dispatch($({taskId:e})),this.taskManagementService.deleteTaskFromServer(e),s.dismiss(),this.router.navigate([""])})}};r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=w({type:r,selectors:[["app-task-sheet"]],standalone:!0,features:[M],decls:8,vars:4,consts:[[1,"task_wrapper"],[1,"task"],["class","task_sheet",4,"ngIf","ngIfElse"],["notasks",""],["matTooltip","Close","matTooltipPosition","above",1,"task_close",3,"click"],[1,"task_sheet"],[1,"task_nowrap"],[4,"ngIf","ngIfElse"],["change",""],[1,"task_sheet_controls"],[1,"task_change",3,"click"],[1,"task_inputs"],["for","executor"],["id","executor","type","text","required",""],["executors",""],["for","status"],["id","status","type","status","required",""],["stat",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,c){if(e&1&&(i(0,"div",0)(1,"div",1),x(2,W,14,6,"div",2),O(3,"async"),x(4,X,2,0,"ng-template",null,3,T),i(6,"button",4),u("click",function(){return c.onBack()}),o(7,"+"),t()()()),e&2){let m=k(5);l(2),h("ngIf",P(3,2,c.taskSheet$))("ngIfElse",m)}},dependencies:[F,V,B,D,G,U],styles:[".task_wrapper[_ngcontent-%COMP%]{width:95%;max-width:800px;margin:auto;overflow:hidden;display:flex;align-items:center;justify-content:center}.task[_ngcontent-%COMP%]{padding-top:5vh;display:flex;align-items:flex-start;justify-content:center;width:90%;max-width:300px;position:relative}.task_close[_ngcontent-%COMP%]{position:absolute;top:10px;right:-20px;color:var(--orange);background:var(--background);border:none;font-size:2rem;transform:rotate(45deg);transition:.3s}.task_close[_ngcontent-%COMP%]:hover{cursor:pointer;transform:rotate(90deg);transition:.3s}.task_sheet[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}.task_sheet_controls[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.task_change[_ngcontent-%COMP%]{color:var(--background);background:var(--main);border:none;border-radius:5px;margin:5px;padding:5px}.task_inputs[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;justify-content:center;row-gap:1vh;width:100%;margin:0 0 2vh}.task_inputs[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%}.task_nowrap[_ngcontent-%COMP%]{overflow:hidden;overflow-wrap:anywhere;text-overflow:ellipsis;text-align:center}"],changeDetection:0});let a=r;return a})();export{ge as TaskSheetComponent};
